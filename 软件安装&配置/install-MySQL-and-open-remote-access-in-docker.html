<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>在Docker中安装MySQL5.7并开启远程访问(附授权和修改密码方式) | 敲代码的小松鼠</title>
    <meta name="generator" content="VuePress 1.5.4">
    <script src="scripts/myfooter.js"></script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="google-site-verification" content="NL5qmCT5yDHkyrRJUGxdC-9yeoSzCGXptwYUFziA64s">
    <link rel="preload" href="/assets/css/0.styles.77b9ceb1.css" as="style"><link rel="preload" href="/assets/js/app.b6fb4720.js" as="script"><link rel="preload" href="/assets/js/3.cbefabe2.js" as="script"><link rel="preload" href="/assets/js/1.51f96c15.js" as="script"><link rel="preload" href="/assets/js/12.f5f029fb.js" as="script"><link rel="prefetch" href="/assets/js/10.4f3ba8ab.js"><link rel="prefetch" href="/assets/js/11.f6f6fabf.js"><link rel="prefetch" href="/assets/js/13.d135fd25.js"><link rel="prefetch" href="/assets/js/14.c7cba08d.js"><link rel="prefetch" href="/assets/js/15.92fb5dd3.js"><link rel="prefetch" href="/assets/js/16.3c6cfb37.js"><link rel="prefetch" href="/assets/js/17.ceb1fe5a.js"><link rel="prefetch" href="/assets/js/18.412d079f.js"><link rel="prefetch" href="/assets/js/19.0f3ee6dc.js"><link rel="prefetch" href="/assets/js/20.4f0928e8.js"><link rel="prefetch" href="/assets/js/21.e1c52e55.js"><link rel="prefetch" href="/assets/js/22.a30c60ca.js"><link rel="prefetch" href="/assets/js/23.d476bde3.js"><link rel="prefetch" href="/assets/js/24.75ac6a26.js"><link rel="prefetch" href="/assets/js/25.eaa2324b.js"><link rel="prefetch" href="/assets/js/26.61a790c5.js"><link rel="prefetch" href="/assets/js/27.8b0ce16b.js"><link rel="prefetch" href="/assets/js/28.498e659b.js"><link rel="prefetch" href="/assets/js/29.8f423ae7.js"><link rel="prefetch" href="/assets/js/30.1b642796.js"><link rel="prefetch" href="/assets/js/31.f388ce89.js"><link rel="prefetch" href="/assets/js/32.392ec5ce.js"><link rel="prefetch" href="/assets/js/33.1dbb2f5a.js"><link rel="prefetch" href="/assets/js/34.084c49f1.js"><link rel="prefetch" href="/assets/js/35.15828433.js"><link rel="prefetch" href="/assets/js/36.10298bcb.js"><link rel="prefetch" href="/assets/js/37.3df6d9a8.js"><link rel="prefetch" href="/assets/js/38.c48d8cac.js"><link rel="prefetch" href="/assets/js/39.d155d21c.js"><link rel="prefetch" href="/assets/js/4.a8cf959c.js"><link rel="prefetch" href="/assets/js/40.a50d60ab.js"><link rel="prefetch" href="/assets/js/41.4c5889a0.js"><link rel="prefetch" href="/assets/js/42.3cbe17a2.js"><link rel="prefetch" href="/assets/js/43.3fa5a76e.js"><link rel="prefetch" href="/assets/js/5.feb02e88.js"><link rel="prefetch" href="/assets/js/6.742f9c2e.js"><link rel="prefetch" href="/assets/js/7.1f89de58.js"><link rel="prefetch" href="/assets/js/8.1ea17631.js"><link rel="prefetch" href="/assets/js/9.52c97993.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77b9ceb1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>敲代码的小松鼠</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>小松鼠</span>
            
          <span data-v-64685f0e>2020 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/avatar/bitbug_favicon32.ico" alt="敲代码的小松鼠" class="logo"> <span class="site-name">敲代码的小松鼠</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="iconfont undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/Git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Maven/" class="nav-link"><i class="iconfont undefined"></i>
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="iconfont undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring Data Jpa/" class="nav-link"><i class="iconfont undefined"></i>
  Spring Data Jpa
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web技术&amp;权限/" class="nav-link"><i class="iconfont undefined"></i>
  Web技术&amp;权限
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端技术/" class="nav-link"><i class="iconfont undefined"></i>
  前端技术
</a></li><li class="dropdown-item"><!----> <a href="/categories/多线程/" class="nav-link"><i class="iconfont undefined"></i>
  多线程
</a></li><li class="dropdown-item"><!----> <a href="/categories/常用命令/" class="nav-link"><i class="iconfont undefined"></i>
  常用命令
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库技术/" class="nav-link"><i class="iconfont undefined"></i>
  数据库技术
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法&amp;数学/" class="nav-link"><i class="iconfont undefined"></i>
  算法&amp;数学
</a></li><li class="dropdown-item"><!----> <a href="/categories/软件安装&amp;配置/" class="nav-link"><i class="iconfont undefined"></i>
  软件安装&amp;配置
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/websites.html" class="nav-link"><i class="iconfont reco-document"></i>
  常用网站
</a></div><div class="nav-item"><a href="/messageboard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div><div class="nav-item"><a href="https://github.com/yinyicao" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><!----> <h3 class="name" data-v-ca798c94>
    小松鼠
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>31</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>52</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/DevOps/" class="nav-link"><i class="iconfont undefined"></i>
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/categories/Git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Maven/" class="nav-link"><i class="iconfont undefined"></i>
  Maven
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="iconfont undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring Data Jpa/" class="nav-link"><i class="iconfont undefined"></i>
  Spring Data Jpa
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web技术&amp;权限/" class="nav-link"><i class="iconfont undefined"></i>
  Web技术&amp;权限
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端技术/" class="nav-link"><i class="iconfont undefined"></i>
  前端技术
</a></li><li class="dropdown-item"><!----> <a href="/categories/多线程/" class="nav-link"><i class="iconfont undefined"></i>
  多线程
</a></li><li class="dropdown-item"><!----> <a href="/categories/常用命令/" class="nav-link"><i class="iconfont undefined"></i>
  常用命令
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库技术/" class="nav-link"><i class="iconfont undefined"></i>
  数据库技术
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法&amp;数学/" class="nav-link"><i class="iconfont undefined"></i>
  算法&amp;数学
</a></li><li class="dropdown-item"><!----> <a href="/categories/软件安装&amp;配置/" class="nav-link"><i class="iconfont undefined"></i>
  软件安装&amp;配置
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/websites.html" class="nav-link"><i class="iconfont reco-document"></i>
  常用网站
</a></div><div class="nav-item"><a href="/messageboard.html" class="nav-link"><i class="iconfont reco-suggestion"></i>
  留言板
</a></div><div class="nav-item"><a href="https://github.com/yinyicao" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>在Docker中安装MySQL5.7并开启远程访问(附授权和修改密码方式)</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>小松鼠</span>
            
          <span data-v-64685f0e>2020 - </span>
          2021
        </a></span></div></div> <div data-v-2d5f533b><main class="page"><div class="page-title" style="display:none;"><h1 class="title">在Docker中安装MySQL5.7并开启远程访问(附授权和修改密码方式)</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>小松鼠</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2020-11-25 16:59:08</span></i> <i class="iconfont reco-eye" data-v-3b7f5bdf><span id="/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85&amp;%E9%85%8D%E7%BD%AE/install-MySQL-and-open-remote-access-in-docker.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-3b7f5bdf><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>Docker</span><span class="tag-item" data-v-3b7f5bdf>数据库</span><span class="tag-item" data-v-3b7f5bdf>MySQL</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="安装环境"><a href="#安装环境" class="header-anchor">#</a> 安装环境</h2> <ul><li>Linux CentOS7（Linux version 3.10.0-1127.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) )）,使用命令<code>cat /proc/version</code>查看</li> <li>Docker (version 19.03.13, build 4484c46d9d),使用命令<code>docker --version</code>或<code>docker info</code>可查看</li> <li>MySQL镜像(docker.io/mysql:5.7)</li></ul> <h2 id="安装mysql"><a href="#安装mysql" class="header-anchor">#</a> 安装MySQL</h2> <ol><li><p>查找镜像：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>docker search mysql
</code></pre></div></li></ol> <p>也可以去官网查看镜像tag，选择自己需要的版本，否则会下载最新版本：https://hub.docker.com/_/mysql/</p> <p><img src="/assets/img/support-tags.723c870d.png" alt="官网tag"></p> <ol start="2"><li><p>下载镜像（如上一步，可以指定想要的版本，不指定则为最新版）：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>docker pull mysql:5.7 <span class="token comment"># docker pull mysql</span>
</code></pre></div><p>pull完成可以看一下镜像的信息：</p> <div class="language-shell extra-class"><pre class="language-shell"><code> docker images <span class="token comment"># 查看镜像列表</span>
 ----------------------------------------------------------------------------------------
 REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
 docker.io/mysql     <span class="token number">5.7</span>                 ae0658fdbad5        <span class="token number">3</span> days ago          <span class="token number">449</span> MB
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>docker inspect docker.io/mysql:5.7 <span class="token comment"># 查看具体镜像信息</span>
</code></pre></div></li></ol> <p><img src="/assets/img/image-desc.11847bd9.png" alt="镜像信息"></p> <p>​		上图我截取了一些比较重要的信息，可以看出暴露的端口是<code>3306</code>，还有一些环境变量，数据卷是<code>/var/lib/mysql</code>，端口与数据卷是启动容器时需要进行绑定的，端口用于远程访问，数据卷用于持久化数据。</p> <ol start="3"><li><p>通过镜像创建容器并运行：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>docker run -p <span class="token number">3306</span>:3306 <span class="token punctuation">\</span>
--name mysql <span class="token punctuation">\</span>
--privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/logs:/logs <span class="token punctuation">\</span>
-v <span class="token environment constant">$PWD</span>/data:/var/lib/mysql <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
-d mysql:5.7
</code></pre></div><ul><li><strong>docker run</strong>：创建容器并运行</li> <li><strong>-p 3306:3306</strong>：将容器的 3306 端口映射到主机的 3306 端口。</li> <li><strong>--name mysql</strong>：设置容器的名称mysql。注意：容器名称是唯一的。</li> <li><strong>--privileged=true</strong>：加入 --privileged=true 给容器加上特定权限。因为Centos7安全Selinux禁止了一些安全权限。<a href="https://blog.csdn.net/miaodichiyou/article/details/81562540" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</li> <li><strong>-v $PWD/conf:/etc/mysql/conf.d</strong>：将主机当前目录下的 conf/my.cnf 挂载到容器的 /etc/mysql/my.cnf。</li> <li><strong>-v $PWD/logs:/logs</strong>：将主机当前目录下的 logs 目录挂载到容器的 /logs。</li> <li><strong>-v $PWD/data:/var/lib/mysql</strong> ：将主机当前目录下的data目录挂载到容器的 /var/lib/mysql 。</li> <li><strong>-e MYSQL_ROOT_PASSWORD=123456</strong> ：初始化 root 用户的密码。</li> <li><strong>-d</strong>：告诉容器在后台运行。</li> <li><strong>mysql:5.7</strong>：告诉容器运行的镜像名为mysql:5.7</li></ul></li> <li><p>查看日志是否启动成功<code>docker logs mysql</code>。docker run后返回一串字符，也可以使用它来查看日志。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>docker logs mysql <span class="token comment">#docker logs 0f2105c6dc72261aaea4e403848b95349ab3da47da35414b94d2c082717aad45</span>
</code></pre></div></li></ol> <h2 id="设置mysql远程访问"><a href="#设置mysql远程访问" class="header-anchor">#</a> 设置MySQL远程访问</h2> <ol><li><p>进入启动的mysql容器：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker container <span class="token builtin class-name">exec</span> -it mysql <span class="token function">bash</span> <span class="token comment"># docker exec -ti mysql bash</span>
</code></pre></div></li> <li><p>登录：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mysql -uroot -p
</code></pre></div></li> <li><p>查询user表：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> host<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span>plugin<span class="token punctuation">,</span>authentication_string <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+---------------+-----------------------+-------------------------------------------+</span>
<span class="token operator">|</span> host        <span class="token operator">|</span> <span class="token keyword">user</span>          <span class="token operator">|</span> plugin                <span class="token operator">|</span> authentication_string                     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+---------------+-----------------------+-------------------------------------------+</span>
<span class="token operator">|</span> localhost   <span class="token operator">|</span> root          <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span><span class="token number">39</span>EF1E4F4220858A4F0D30FE91AAD7E4C4AB0812 <span class="token operator">|</span>
<span class="token operator">|</span> localhost   <span class="token operator">|</span> mysql<span class="token punctuation">.</span><span class="token keyword">session</span> <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span>THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE <span class="token operator">|</span>
<span class="token operator">|</span> localhost   <span class="token operator">|</span> mysql<span class="token punctuation">.</span>sys     <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span>THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+---------------+-----------------------+-------------------------------------------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div><p>host为 % 表示不限制ip，localhost表示本机使用，也可以指定IP访问。如果这里plugin非mysql_native_password 则需要修改密码。</p></li> <li><p>添加密码IP远程访问权限：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'172.33.5.46'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
</code></pre></div><p>表示设置指定用户名为root，密码为123456，可访问所有数据库*，只有IP为172.33.5.46这台机器有权限访问。</p></li> <li><p>刷新权限</p> <div class="language-sql extra-class"><pre class="language-sql"><code>flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>再次查询user表：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> host<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span>plugin<span class="token punctuation">,</span>authentication_string <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+---------------+-----------------------+-------------------------------------------+</span>
<span class="token operator">|</span> host        <span class="token operator">|</span> <span class="token keyword">user</span>          <span class="token operator">|</span> plugin                <span class="token operator">|</span> authentication_string                     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+---------------+-----------------------+-------------------------------------------+</span>
<span class="token operator">|</span> localhost   <span class="token operator">|</span> root          <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span><span class="token number">39</span>EF1E4F4220858A4F0D30FE91AAD7E4C4AB0812 <span class="token operator">|</span>
<span class="token operator">|</span> localhost   <span class="token operator">|</span> mysql<span class="token punctuation">.</span><span class="token keyword">session</span> <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span>THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE <span class="token operator">|</span>
<span class="token operator">|</span> localhost   <span class="token operator">|</span> mysql<span class="token punctuation">.</span>sys     <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span>THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">172.33</span><span class="token number">.5</span><span class="token number">.46</span> <span class="token operator">|</span> root          <span class="token operator">|</span> mysql_native_password <span class="token operator">|</span> <span class="token operator">*</span><span class="token number">39</span>EF1E4F4220858A4F0D30FE91AAD7E4C4AB0812 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+---------------+-----------------------+-------------------------------------------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre></div></li></ol> <p>​	此时可以使用IP为172.33.5.46这台机器访问MySQL了。</p> <h2 id="修改mysql配置文件"><a href="#修改mysql配置文件" class="header-anchor">#</a> 修改MySQL配置文件</h2> <blockquote><p>在创建容器时，-v $PWD/conf:/etc/mysql/conf.d语句为我们挂载了配置文件，所以我们只需要在宿主机当前目录下的conf文件夹下修改配置即可</p></blockquote> <p>这里以修改MySQL的字符编码为例。</p> <ol><li><p>进入mysql容器<code>docker exec -ti mysql bash</code>，登录mysql<code>mysql -uroot -p</code>，查询当前编码<code>show variables like '%character%';</code></p></li> <li><p>确定Docker内 MySQL 文件相关路径</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 查找Docker内，MySQL配置文件my.cnf的位置，加载顺序根据列出的顺序一致</span>
mysql --help <span class="token operator">|</span> <span class="token function">grep</span> my.cnf
</code></pre></div><p><img src="data:image/png;base64,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" alt=""></p> <p>打开/etc/mysql/my.cnf可以发现include正是我们之前挂载的目录/etc/mysql/conf.d，里面以.cnf结尾的文件在启动时都会被加载。</p></li> <li><p>直接在宿主机上修改配置</p> <p>我这里的$pwd是 <code>/home/centos</code> ，所以直接进入目录</p> <div class="language- extra-class"><pre class="language-text"><code>cd /home/centos/conf
</code></pre></div><p>可以发现里面啥也没有，直接<code>vim my.cnf</code>新建一个即可。</p></li> <li><p>输入配置信息，保存退出</p> <div class="language- extra-class"><pre class="language-text"><code>[client]
default-character-set=utf8mb4
[mysql]
default-character-set=utf8mb4
[mysqld]
character-set-server=utf8mb4
</code></pre></div></li> <li><p>重启mysql，生效</p> <div class="language-shell extra-class"><pre class="language-shell"><code>docker restart mysql
</code></pre></div><p>再次查看编码<code>show variables like '%character%';</code>发现已经修改成功。</p></li></ol> <h2 id="附录-授予权限与修改密码"><a href="#附录-授予权限与修改密码" class="header-anchor">#</a> <em>附录：授予权限与修改密码</em></h2> <ul><li><p>修改密码：将user为root，host为172.33.5.46的密码修改为1234567</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'172.33.5.46'</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">'1234567'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>删除user表的某一记录：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span> <span class="token string">'root'</span> <span class="token operator">and</span> host<span class="token operator">=</span><span class="token string">'172.33.5.46'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>授权：设置一个只能IP为<code>172.33.5.46</code>访问，用户名为root,密码为123456可以访问所有数据库的权限的用户</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'172.33.5.46'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> <em>参考</em></h2> <p>[1]. <a href="https://blog.csdn.net/miaodichiyou/article/details/81562540" target="_blank" rel="noopener noreferrer">mysqld: Can't read dir of '/etc/mysql/conf.d/' (Errcode: 13 - Permission denied)_赵健乔的技术Blog-CSDN博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[2]. <a href="https://www.cnblogs.com/yy-cola/p/11226924.html" target="_blank" rel="noopener noreferrer">使用docker安装mysql并连接 - luckylemon - 博客园 (cnblogs.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[3]. <a href="https://www.jianshu.com/p/e7ac0717be00?from=timeline&amp;isappinstalled=0" target="_blank" rel="noopener noreferrer">Docker部署mysql，并配置远程连接 - 简书 (jianshu.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[4]. <a href="https://www.cnblogs.com/weile0769/p/11863779.html" target="_blank" rel="noopener noreferrer">Docker安装MySQL并挂载数据及配置文件 - Weiles - 博客园 (cnblogs.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>[5]. <a href="https://www.jianshu.com/p/6e5da590aeda" target="_blank" rel="noopener noreferrer">Docker 升级到最新版本 - 简书 (jianshu.com)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.b6fb4720.js" defer></script><script src="/assets/js/3.cbefabe2.js" defer></script><script src="/assets/js/1.51f96c15.js" defer></script><script src="/assets/js/12.f5f029fb.js" defer></script>
  </body>
</html>
