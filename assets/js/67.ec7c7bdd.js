(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{643:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("在Vmware pro v16.2.2中安装Ubuntu22.04出现vm-tools无法安装，且无法连接网络。")]),s._v(" "),a("p",[s._v("第一个问题vm-tools无法安装初步判定是Vmware 的版本对Ubuntu22.04不兼容造成的,安装open-vm-tools可以解决。")]),s._v(" "),a("p",[s._v("第二个问题安装好的Ubuntu22.04没有网络，是在设置静态IP后重启了宿主机出现的，初步估计也是Vmware 的版本对Ubuntu22.04不兼容造成的。")]),s._v(" "),a("h2",{attrs:{id:"安装环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装环境"}},[s._v("#")]),s._v(" 安装环境")]),s._v(" "),a("ul",[a("li",[s._v("windows 10 专业版 20H2")]),s._v(" "),a("li",[s._v("Vmware pro v16.2.2")]),s._v(" "),a("li",[s._v("Ubuntu22.04")])]),s._v(" "),a("h2",{attrs:{id:"vm-tools无法安装问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vm-tools无法安装问题"}},[s._v("#")]),s._v(" vm-tools无法安装问题")]),s._v(" "),a("p",[s._v("不安装vm-tools最大的问题就是虚拟机的屏幕很小，无法自适应。最终通过Google解决，方案如下：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" open-vm-tools\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" open-vm-tools-desktop open-vm-tools\n")])])]),a("p",[s._v("重启虚拟机，验证：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("lsmod "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" vmw\n")])])]),a("h2",{attrs:{id:"ubuntu22-04没有网络问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu22-04没有网络问题"}},[s._v("#")]),s._v(" Ubuntu22.04没有网络问题")]),s._v(" "),a("blockquote",[a("p",[s._v("网络模式为NAT模式，在"),a("code",[s._v("编辑--\x3e虚拟网络编辑器--\x3e选中NAT模式--\x3eNAT设置")]),s._v("查看子网和网关。")])]),s._v(" "),a("blockquote",[a("p",[s._v("NetworkManager是一项后端服务，用于控制Ubuntu操作系统上的网络接口。NetworkManager的替代方法是systemd-networked。在Ubuntu桌面上，网络管理器是通过图形用户界面管理网络界面的默认服务。因此，如果要通过GUI配置IP地址，则应启用网络管理器。")]),s._v(" "),a("p",[s._v("Ubuntu网络管理器的替代方法是systemd-networkd，这是Ubuntu服务器18.04中的默认后端服务。")]),s._v(" "),a("p",[s._v("因此，如果要禁用NetworkManager，则应启用网络服务，而在网络管理器运行时最好禁用网络服务。")])]),s._v(" "),a("p",[s._v("表现为：使用ifconfig命令查看网卡只有一个"),a("code",[s._v("lo")]),s._v("网卡，使用"),a("code",[s._v("ip a")]),s._v("后显示"),a("code",[s._v("ens33")]),s._v("网卡未启动")]),s._v(" "),a("p",[s._v("先禁用NetworkManager启动并启用systemd-networkd：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl stop NetworkManager\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl disable NetworkManager\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl mask NetworkManager\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl unmask systemd-networkd.service\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" systemd-networkd.service\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start systemd-networkd.service\n")])])]),a("p",[s._v("启动网卡：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" ens33 up\n")])])]),a("p",[s._v("使用"),a("code",[s._v("netplan")]),s._v("管理网络，新建配置文件(在/etc/netplan目录中)，文件名可自定义，注意其中的参数与之前Vmware中查看的要匹配")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yyc@yyc-virtual-machine:~/Desktop$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/netplan/01-netcfg.yaml \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Let NetworkManager manage all devices on this system")]),s._v("\nnetwork:\n  version: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  renderer: networkd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用networkd而不是NetworkManager")]),s._v("\n  ethernets:\n    ens33:\n      dhcp4: no\n      addresses:\n        - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.188/24 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义的IP")]),s._v("\n      routes:\n        - to: default\n          via: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.2 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网关")]),s._v("\n      nameservers:\n        addresses: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("114.114")]),s._v(".114.114,8.8.8.8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("p",[s._v("应用设置：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" netplan apply\n")])])]),a("p",[s._v("然后使用命令"),a("code",[s._v("sudo dhclient ens33 -v")]),s._v("验证成功")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yyc@yyc-virtual-machine:~/Desktop$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dhclient ens33 -v\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sudo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" yyc: \nInternet Systems Consortium DHCP Client "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.4")]),s._v(".1\nCopyright "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2004")]),s._v("-2018 Internet Systems Consortium.\nAll rights reserved.\nFor info, please visit https://www.isc.org/software/dhcp/\n\nListening on LPF/ens33/00:0c:29:b1:cf:48\nSending on   LPF/ens33/00:0c:29:b1:cf:48\nSending on   Socket/fallback\nDHCPDISCOVER on ens33 to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.255 port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("67")]),s._v(" interval "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0xf16ad521"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDHCPOFFER of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.131 from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.254\nDHCPREQUEST "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.131 on ens33 to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.255 port "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("67")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x21d56af1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDHCPACK of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.131 from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.254 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0xf16ad521"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nbound to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.131 -- renewal "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("763")]),s._v(" seconds.\n")])])]),a("p",[s._v("如上所示，IP是"),a("code",[s._v("192.168.116.131")]),s._v("而不是我们自己设置的"),a("code",[s._v("192.168.116.188")]),s._v("，这是Vmware的DHCP服务自动分配的IP。但是，这不影响我们直接使用自定义的IP。")]),s._v(" "),a("p",[s._v("使用"),a("code",[s._v("ifconfig")]),s._v("查看是使用的我们自定义的IP：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yyc@yyc-virtual-machine:~/Desktop$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v("\nens33: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("416")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,BROADCAST,RUNNING,MULTICAST"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n        inet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.188  netmask "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0  broadcast "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".116.255\n        inet6 fe80::20c:29ff:feb1:cf48  prefixlen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ether 00:0c:29:b1:cf:48  txqueuelen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ethernet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("160")]),s._v("  bytes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99180")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.1")]),s._v(" KB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("177")]),s._v("  bytes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26357")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26.3")]),s._v(" KB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nlo: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,LOOPBACK,RUNNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n        inet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  netmask "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.0")]),s._v(".0.0\n        inet6 ::1  prefixlen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("  scopeid 0x1"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        loop  txqueuelen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Local Loopback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("139")]),s._v("  bytes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12137")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.1")]),s._v(" KB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("139")]),s._v("  bytes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12137")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.1")]),s._v(" KB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" "),a("em",[s._v("参考：")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://linuxconfig.org/install-vmware-tools-on-ubuntu-20-04-focal-fossa-linux",target:"_blank",rel:"noopener noreferrer"}},[s._v("Install VMware tools on Ubuntu 20.04 Focal Fossa Linux - Linux Tutorials - Learn Linux Configuration"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("https://computingforgeeks.com/how-to-configure-static-ip-address-on-ubuntu/")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/nuoforever/p/14176630.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("在Ubuntu上启用和禁用NetworkManager - soso101 - 博客园 (cnblogs.com)"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);